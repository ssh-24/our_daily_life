"use strict";(self.webpackChunkour_daily_life=self.webpackChunkour_daily_life||[]).push([[86],{8086:function(e,t,n){n.r(t);var r=n(1413),a=n(9439),o=n(2791),s=n(9434),c=n(7689),i=n(6849),u=n(1542),l=n(2969),d=n(8277),p=n(8547),f=n(6152),g=n(184);t.default=function(){var e=(0,i.E)(),t=(e.isAuthReady,e.user),n=(0,u.e)("UserData",["UID","==",t.uid]).documents,m=(0,s.v9)((function(e){return e.inputState})),v=(0,s.v9)((function(e){return e.inputState.visible})),y=(0,s.I0)(),x=(0,c.s0)(),Z=(0,o.useState)(""),w=(0,a.Z)(Z,2),D=w[0],j=w[1],k=(0,o.useState)(""),F=(0,a.Z)(k,2),S=F[0],T=F[1],b=(0,o.useState)(!1),M=(0,a.Z)(b,2),E=M[0],N=M[1],P=(0,o.useState)(""),U=(0,a.Z)(P,2),C=U[0],_=U[1];(0,o.useEffect)((function(){document.body.style.overflow=v?"hidden":"",y((0,l.AM)("")),j(""),_(v?"transition-end":""),N(!1)}),[v]),(0,o.useEffect)((function(){return y((0,l.WG)(t.email)),y((0,l.qS)(t.uid)),N(!1),function(){y((0,l.yx)(!1)),y((0,l.AM)("")),y((0,l.WG)("")),y((0,l.qS)(""))}}),[]),(0,o.useEffect)((function(){if(null!=n&&0!==n.length){var e=n[0];y((0,l.hC)(n[0].displayName)),delete e.createdTime,y((0,p.x)(e))}}),[n]),window.onkeydown=function(e){"Escape"===e.key&&console.log("\ub538")},window.onkeyup=function(e){"Escape"===e.key&&(console.log("\uae4d"),y((0,l.yx)(!1)))};var q=(0,d.C)("FeedData"),A=q.addDocument,J=(q.response,function(e){var t={type:e.target.type,value:e.target.value};"text"===t.type?y((0,l.AM)(t.value)):L(e)}),L=function(e){var t=new FileReader;t.onload=function(e){j(e.target.result)},t.readAsDataURL(e.target.files[0]),T(e.target.files[0])};return(0,g.jsx)(g.Fragment,{children:v?(0,g.jsxs)(g.Fragment,{children:[E?(0,g.jsx)(f.Z,{}):null,(0,g.jsx)("div",{className:"dimmed-layer ".concat(C)}),(0,g.jsx)("div",{className:"input-area transition-start ".concat(C),children:(0,g.jsx)("div",{className:"form-container",children:(0,g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),N(!0);var t=(0,r.Z)({},m);t.peopleWhoLike=[],t.likes=0,t.peopleWhoReply=[],t.replies=0,t.peopleWhoSave=[],t.shares=0,t.profileImage=n[0].profileImage,A(t,S).then((function(){setTimeout((function(){y((0,l.yx)(!1)),x("/"),window.scrollTo({top:0,behavior:"smooth"})}),3e3)})).catch((function(e){alert("\uc11c\ubc84\uc5d0 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc5b4\uc694\ud83d\ude25 \n \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694!"),y((0,l.yx)(!1))}))},children:[(0,g.jsx)("h3",{children:"\uc0c8 \uac8c\uc2dc\ubb3c \ub9cc\ub4e4\uae30"}),(0,g.jsx)("div",{className:"form-group",children:(0,g.jsx)("input",{accept:"image/jpeg,image/png,image/heic,image/heif,video/mp4,video/quicktime",className:"img-input",multiple:"",type:"file",onChange:J,required:!0})}),D.length>0&&(0,g.jsx)("img",{src:D,alt:"",style:{marginBottom:"13px",width:"80%",maxHeight:"240px"}}),(0,g.jsx)("div",{className:"form-group",children:(0,g.jsx)("input",{type:"text",value:m.postText,onChange:J,className:"form-control post-text-input",name:"postText",placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694!",required:!0})}),(0,g.jsx)("input",{type:"submit",className:"post-btn",value:"\uacf5\uc720\ud558\uae30"}),(0,g.jsx)("div",{className:"close-btn",children:(0,g.jsx)(h,{onClick:function(e){e.preventDefault(),y((0,l.yx)(!1))}})})]})})})]}):null})};var h=function(e){return(0,g.jsxs)("svg",(0,r.Z)((0,r.Z)({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"none"},e),{},{children:[(0,g.jsx)("title",{children:"close"}),(0,g.jsx)("path",{fill:"#FFFFFF",d:"M12.78 4.28a.75.75 0 00-1.06-1.06L8 6.94 4.28 3.22a.75.75 0 00-1.06 1.06L6.94 8l-3.72 3.72a.75.75 0 101.06 1.06L8 9.06l3.72 3.72a.75.75 0 101.06-1.06L9.06 8l3.72-3.72z"})]}))}},1542:function(e,t,n){n.d(t,{e:function(){return u}});var r=n(1413),a=n(3433),o=n(9439),s=n(77),c=n(2791),i=n(7799),u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",u=(0,c.useState)(null),l=(0,o.Z)(u,2),d=l[0],p=l[1],f=(0,c.useState)(null),g=(0,o.Z)(f,2),h=g[0],m=g[1];return(0,c.useEffect)((function(){var o;o=n.length>0?(0,i.IO)((0,i.hJ)(s.d_,e),i.ar.apply(void 0,(0,a.Z)(t)),(0,i.Xo)("createdTime","desc")):(0,i.IO)((0,i.hJ)(s.d_,e),i.ar.apply(void 0,(0,a.Z)(t)));var c=(0,i.cf)(t?o:(0,i.hJ)(s.d_,e),(function(e){var t=[];e.docs.forEach((function(e){t.push((0,r.Z)((0,r.Z)({},e.data()),{},{id:e.id}))})),p(t),m(null)}),(function(e){m(e.message)}));return c}),[i.hJ]),{documents:d,error:h}}},8277:function(e,t,n){n.d(t,{C:function(){return h}});var r=n(4165),a=n(1413),o=n(5861),s=n(9439),c=n(2791),i=n(77),u=n(7799),l=n(276);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=new Date,o=a.getFullYear(),s=a.getMonth(),c=a.getDate(),i=a.getHours(),u=a.getMinutes(),l=a.getMilliseconds();return 0!==t&&a.setMonth(a.getMonth()+t),0!==n&&a.setDate(a.getDate()+n),0!==o&&a.setFullYear(a.getFullYear()+r),s=("0"+(1+a.getMonth())).slice(-2),c=("0"+a.getDate()).slice(-2),(o=a.getFullYear())+e+s+e+c+i+u+l}function p(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",n=arguments.length>2?arguments[2]:void 0,r=n.getFullYear(),a=n.getMonth()+1,o=n.getDate(),s=n.getHours(),c=n.getMinutes();1===(""+a).length&&(a="0"+a);1===(""+o).length&&(o="0"+o);1===(""+s).length&&(s="0"+s);1===(""+c).length&&(c="0"+c);return""+r+e+a+e+o+" "+s+t+c}(e,t,new Date)}var f={document:null,isPending:!1,error:null,success:!1},g=function(e,t){switch(t.type){case"isPending":return{isPending:!0,document:null,success:!1,error:null};case"addDoc":case"editDoc":case"deleteDoc":return{isPending:!1,document:t.payload,success:!0,error:null};case"error":return{isPending:!1,document:null,success:!1,error:t.payload};default:return e}},h=function(e){var t=(0,c.useReducer)(g,f),n=(0,s.Z)(t,2),h=n[0],m=n[1],v=(0,c.useState)([]),y=(0,s.Z)(v,2),x=(y[0],y[1],(0,u.hJ)(i.d_,e)),Z=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o,s,c,f,g;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=i.AB.fromDate(new Date),s=p("/",":"),c=d(),f=(0,l.iH)(i.tO,"images/"+n.name),g=(0,l.B0)(f,n),m({type:"isPending"});try{g.on("state_changed",(function(e){}),(function(e){console.error("\uc2e4\ud328 \uc0ac\uc720 --\x3e ",e)}),(function(){(0,l.Jt)(g.snapshot.ref).then((function(e){console.log("\uc5c5\ub85c\ub4dc \uacbd\ub85c --\x3e ",e);var n=(0,u.ET)(x,(0,a.Z)((0,a.Z)({},t),{},{createdTime:o,createdDate:s,createdUqe:c,downloadURL:e}));console.log(n),m({type:"addDoc",payload:n}),console.log("\uc800\uc7a5\uc644\ub8cc")}))}))}catch(r){m({type:"error",payload:r.message})}case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.AB.fromDate(new Date),o=p("/",":"),s=d(),m({type:"isPending"});try{c=(0,u.ET)(x,(0,a.Z)((0,a.Z)({},t),{},{createdTime:n,createdDate:o,createdUqe:s})),console.log(c),m({type:"addDoc",payload:c}),console.log("\uc800\uc7a5\uc644\ub8cc")}catch(r){m({type:"error",payload:r.message})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m({type:"isPending"}),e.prev=1,e.next=4,(0,u.r7)((0,u.JU)(x,n),(0,a.Z)({},t));case 4:o=e.sent,m({type:"editDoc",payload:o}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),m({type:"error",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m({type:"isPending"}),e.prev=1,e.next=4,(0,u.oe)((0,u.JU)(x,t));case 4:n=e.sent,m({type:"deleteDoc",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),m({type:"error",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.AB.fromDate(new Date),o=p("/",":"),s=d(),m({type:"isPending"});try{c=(0,u.ET)(x,(0,a.Z)((0,a.Z)({},t),{},{createdTime:n,createdDate:o,createdUqe:s})),console.log(c),m({type:"addDoc",payload:c}),console.log("\uc800\uc7a5\uc644\ub8cc")}catch(r){m({type:"error",payload:r.message})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{addDocument:Z,addComment:w,editDocument:D,deleteDocument:j,addUser:k,response:h}}}}]);
//# sourceMappingURL=86.6a79283e.chunk.js.map