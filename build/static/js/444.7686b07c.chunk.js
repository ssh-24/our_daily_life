"use strict";(self.webpackChunkour_daily_life=self.webpackChunkour_daily_life||[]).push([[444],{3444:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var a=n(9439),r=n(2791),i=n(6849),o=n(1542),s=n(2969),l=n(9434),c=n(7689),u=n(4942),d=n(1413),f=n(8277),p=n(9693),m=n(67),g=n(276),h=n(77),v=n(6152),y=n(184);var x=function(e){var t=(0,i.E)().user,n=(0,o.e)("FeedData",["UID","==",t.uid]).documents,s=(0,o.e)("UserData",["UID","==",t.uid]).documents,c=(0,f.C)("FeedData").editDocument,x=(0,f.C)("UserData").editDocument,j=(0,l.v9)((function(e){return e.profileState.pfVisible})),w=(0,l.I0)(),D=(0,r.useState)(""),N=(0,a.Z)(D,2),I=N[0],b=N[1],k=(0,r.useState)(""),U=(0,a.Z)(k,2),E=U[0],F=U[1],S=(0,r.useState)(""),C=(0,a.Z)(S,2),P=C[0],_=C[1],q=(0,r.useState)({displayName:"",profileImage:"",profileIntro:""}),J=(0,a.Z)(q,2),M=J[0],T=J[1],B=(0,r.useState)(!1),L=(0,a.Z)(B,2),R=L[0],H=L[1],O=(0,r.useState)(""),Y=(0,a.Z)(O,2),A=Y[0],V=Y[1],z=(0,r.useState)(!1),W=(0,a.Z)(z,2),X=W[0],G=W[1],K=(0,r.useState)(!1),Q=(0,a.Z)(K,2),$=Q[0],ee=Q[1],te=M.displayName,ne=M.profileImage,ae=M.profileIntro,re=function(e){var t=e.target,n=t.value,a=t.name;"text"===e.target.type?T((0,d.Z)((0,d.Z)({},M),{},(0,u.Z)({},a,n))):ie(e)},ie=function(e){var t=new FileReader;t.onload=function(e){b(e.target.result)},t.readAsDataURL(e.target.files[0]),F(e.target.files[0])};return(0,r.useEffect)((function(){""!==A&&void 0!==A&&(T((0,d.Z)((0,d.Z)({},M),{},{profileImage:A})),G(!0))}),[A]),(0,r.useEffect)((function(){X&&(0!==n.length&&n.map((function(e,t){c({displayName:te,profileImage:ne},e.id)})),x({profileIntro:ae,displayName:te,profileImage:ne},s[0].id).then((function(){w((0,p.n)(!1))})))}),[X]),(0,r.useEffect)((function(){return document.body.style.overflow="hidden",_("transition-end"),b(""),H(!1),G(!1),ee(!1),function(){document.body.style.overflow=""}}),[]),(0,r.useEffect)((function(){null!=n&&null!=s&&T({displayName:s[0].displayName,profileImage:s[0].profileImage,profileIntro:s[0].profileIntro})}),[s,n]),(0,r.useEffect)((function(){T((0,d.Z)((0,d.Z)({},M),{},{profileImage:E})),H(!0)}),[E]),(0,r.useEffect)((function(){H(!1),G(!1),ee(!1)}),[j]),window.onkeydown=function(e){"Escape"===e.key&&console.log("\uafb8")},window.onkeyup=function(e){"Escape"===e.key&&(console.log("\uc6b1"),w((0,p.n)(!1)))},(0,y.jsxs)(y.Fragment,{children:[$?(0,y.jsx)(v.Z,{}):null,(0,y.jsx)("div",{className:"dimmed-layer ".concat(P)}),(0,y.jsx)("div",{className:"input-area transition-start ".concat(P),children:(0,y.jsx)("div",{className:"form-container",children:(0,y.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),ee(!0),R){var t=(0,g.iH)(h.tO,"images/"+ne.name),a=(0,g.B0)(t,ne);setTimeout((function(){(0,g.Jt)(a.snapshot.ref).then((function(e){V(e)})).catch((function(e){alert("\uc11c\ubc84\uc5d0 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc5b4\uc694\ud83d\ude25 \n \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694!"),w((0,p.n)(!1))}))}),3e3)}else 0!==n.length&&n.map((function(e,t){c({displayName:te},e.id)})),x({profileIntro:ae,displayName:te},s[0].id).then((function(){w((0,p.n)(!1))}))},children:[(0,y.jsx)("h3",{children:"\ub0b4 \ud504\ub85c\ud544"}),(0,y.jsxs)("div",{className:"form-group profile-input",children:[(0,y.jsx)(m.Z,{}),(0,y.jsx)("input",{accept:"image/jpeg,image/png,image/heic,image/heif,video/mp4,video/quicktime",className:"img-input profile-text-input",multiple:"",type:"file",onChange:re})]}),I.length>0&&(0,y.jsx)("img",{src:I,alt:"",style:{marginBottom:"13px",width:"70%",maxWidth:"200px",maxHeight:"200px",borderRadius:"100%"}}),(0,y.jsxs)("div",{className:"form-group profile-input",children:[(0,y.jsx)(m.Z,{}),(0,y.jsx)("input",{type:"text",name:"displayName",value:te,onChange:re,className:"form-control profile-text-input",placeholder:"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694!",required:!0})]}),(0,y.jsxs)("div",{className:"form-group profile-input",children:[(0,y.jsx)(m.Z,{}),(0,y.jsx)("input",{type:"text",name:"profileIntro",value:ae,onChange:re,className:"form-control profile-text-input",placeholder:"\uc18c\uac1c\uae00\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694!",required:!0})]}),(0,y.jsx)("input",{type:"submit",className:"post-btn",value:"\uc800\uc7a5\ud558\uae30"}),(0,y.jsx)("div",{className:"close-btn",children:(0,y.jsx)(Z,{onClick:function(e){e.preventDefault(),w((0,p.n)(!1))}})})]})})})]})},Z=function(e){return(0,y.jsxs)("svg",(0,d.Z)((0,d.Z)({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"none"},e),{},{children:[(0,y.jsx)("title",{children:"close"}),(0,y.jsx)("path",{fill:"#FFFFFF",d:"M12.78 4.28a.75.75 0 00-1.06-1.06L8 6.94 4.28 3.22a.75.75 0 00-1.06 1.06L6.94 8l-3.72 3.72a.75.75 0 101.06 1.06L8 9.06l3.72 3.72a.75.75 0 101.06-1.06L9.06 8l3.72-3.72z"})]}))};var j=function(e){var t=(0,i.E)().user,n=(0,c.UO)().uid,u=(0,o.e)("FeedData",["UID","==",n]).documents,d=(0,o.e)("UserData",["UID","==",n]).documents,f=(0,r.useState)(!1),m=(0,a.Z)(f,2),g=m[0],h=m[1],v=(0,l.v9)((function(e){return e.loginUserInfo})),Z=(0,r.useState)(""),j=(0,a.Z)(Z,2),w=j[0],D=j[1],N=(0,l.v9)((function(e){return e.profileState.pfVisible})),I=(0,l.I0)(),b=(0,c.s0)();return(0,r.useEffect)((function(){h(!1)}),[]),(0,r.useEffect)((function(){h(!0)}),[u]),(0,r.useEffect)((function(){D(g?"transition-end":"")}),[g]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("section",{children:[(0,y.jsx)("div",{className:"container transition-start ".concat(w),children:(0,y.jsxs)("div",{className:"container-wrap",children:[(0,y.jsx)("img",{className:"profile-img",src:t.uid===n?v.profileImage:g&&null!=d&&0!==d.length?d[0].profileImage:"/assets/profile_default.png",alt:"\ud504\ub85c\ud544 \uc0ac\uc9c4"}),(0,y.jsxs)("div",{className:"profile-info",children:[t.uid===n?(0,y.jsxs)("h3",{className:"profile-displayname",children:["@",v.displayName]}):(0,y.jsxs)("h3",{className:"profile-displayname",children:["@",g&&null!=d&&0!==d.length?d[0].displayName:"\ub370\uc774\ud130\uac00 \uc5c6\uc5b4\uc694!"]}),t.uid===n?(0,y.jsxs)("h4",{className:"profile-email",children:["\u2709\xa0",t.uid===n?t.email:g&&null!=u&&0!==u.length?u[0].userEmail:"\ub370\uc774\ud130\uac00 \uc5c6\uc5b4\uc694!"]}):null,(0,y.jsx)("p",{className:"profile-intro",children:g&&null!=d&&0!==d.length?d[0].profileIntro:"\ub370\uc774\ud130\uac00 \uc5c6\uc5b4\uc694!"}),t.uid===n?(0,y.jsx)("button",{onClick:function(){I((0,p.n)(!0))},children:"\ud504\ub85c\ud544 \ubcc0\uacbd"}):null]})]})}),(0,y.jsxs)("div",{className:"content-list transition-start ".concat(w),children:[(0,y.jsx)("div",{className:g&&null!=u&&u.length>2?"content-wrap":g&&null!=u&&2===u.length?"content-wrap-two":g&&null!=u&&1===u.length?"content-wrap-one":"content-wrap-no-post",children:g&&null!=u&&0!==u.length?u.sort((function(e,t){return t.createdUqe.substring(0,10)-e.createdUqe.substring(0,10)})).map((function(e,t){return(0,y.jsx)("img",{className:"my-img",src:e.downloadURL,alt:"#",onClick:function(t){return function(e){b("/detail/"+e.id)}(e)}},e.createdUqe)})):(0,y.jsxs)("div",{className:"no-post",children:[(0,y.jsx)("p",{children:"\uc791\uc131\ub41c \uac8c\uc2dc\ubb3c\uc774 \uc5c6\uc5b4\uc694!"}),t.uid===n?(0,y.jsx)("button",{className:"upload-btn-profile",onClick:function(){I((0,s.yx)(!0))},children:"\uac8c\uc2dc\ubb3c \uc791\uc131\ud558\uae30"}):null]})}),(0,y.jsx)("div",{className:"profile-go-main-btn-area",children:(0,y.jsx)("button",{className:"go-main-btn",onClick:function(){b("/"),window.scrollTo({top:0,behavior:"smooth"})},children:"\ub3cc\uc544\uac00\uae30"})})]})]}),N?(0,y.jsx)(x,{}):null]})}},1542:function(e,t,n){n.d(t,{e:function(){return c}});var a=n(1413),r=n(3433),i=n(9439),o=n(77),s=n(2791),l=n(7799),c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=(0,s.useState)(null),u=(0,i.Z)(c,2),d=u[0],f=u[1],p=(0,s.useState)(null),m=(0,i.Z)(p,2),g=m[0],h=m[1];return(0,s.useEffect)((function(){var i;i=n.length>0?(0,l.IO)((0,l.hJ)(o.d_,e),l.ar.apply(void 0,(0,r.Z)(t)),(0,l.Xo)("createdTime","desc")):(0,l.IO)((0,l.hJ)(o.d_,e),l.ar.apply(void 0,(0,r.Z)(t)));var s=(0,l.cf)(t?i:(0,l.hJ)(o.d_,e),(function(e){var t=[];e.docs.forEach((function(e){t.push((0,a.Z)((0,a.Z)({},e.data()),{},{id:e.id}))})),f(t),h(null)}),(function(e){h(e.message)}));return s}),[l.hJ]),{documents:d,error:g}}},8277:function(e,t,n){n.d(t,{C:function(){return g}});var a=n(4165),r=n(1413),i=n(5861),o=n(9439),s=n(2791),l=n(77),c=n(7799),u=n(276);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=new Date,i=r.getFullYear(),o=r.getMonth(),s=r.getDate(),l=r.getHours(),c=r.getMinutes(),u=r.getMilliseconds();return 0!==t&&r.setMonth(r.getMonth()+t),0!==n&&r.setDate(r.getDate()+n),0!==i&&r.setFullYear(r.getFullYear()+a),o=("0"+(1+r.getMonth())).slice(-2),s=("0"+r.getDate()).slice(-2),(i=r.getFullYear())+e+o+e+s+l+c+u}function f(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",n=arguments.length>2?arguments[2]:void 0,a=n.getFullYear(),r=n.getMonth()+1,i=n.getDate(),o=n.getHours(),s=n.getMinutes();1===(""+r).length&&(r="0"+r);1===(""+i).length&&(i="0"+i);1===(""+o).length&&(o="0"+o);1===(""+s).length&&(s="0"+s);return""+a+e+r+e+i+" "+o+t+s}(e,t,new Date)}var p={document:null,isPending:!1,error:null,success:!1},m=function(e,t){switch(t.type){case"isPending":return{isPending:!0,document:null,success:!1,error:null};case"addDoc":case"editDoc":case"deleteDoc":return{isPending:!1,document:t.payload,success:!0,error:null};case"error":return{isPending:!1,document:null,success:!1,error:t.payload};default:return e}},g=function(e){var t=(0,s.useReducer)(m,p),n=(0,o.Z)(t,2),g=n[0],h=n[1],v=(0,s.useState)([]),y=(0,o.Z)(v,2),x=(y[0],y[1],(0,c.hJ)(l.d_,e)),Z=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,n){var i,o,s,p,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=l.AB.fromDate(new Date),o=f("/",":"),s=d(),p=(0,u.iH)(l.tO,"images/"+n.name),m=(0,u.B0)(p,n),h({type:"isPending"});try{m.on("state_changed",(function(e){}),(function(e){console.error("\uc2e4\ud328 \uc0ac\uc720 --\x3e ",e)}),(function(){(0,u.Jt)(m.snapshot.ref).then((function(e){console.log("\uc5c5\ub85c\ub4dc \uacbd\ub85c --\x3e ",e);var n=(0,c.ET)(x,(0,r.Z)((0,r.Z)({},t),{},{createdTime:i,createdDate:o,createdUqe:s,downloadURL:e}));console.log(n),h({type:"addDoc",payload:n}),console.log("\uc800\uc7a5\uc644\ub8cc")}))}))}catch(a){h({type:"error",payload:a.message})}case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.AB.fromDate(new Date),i=f("/",":"),o=d(),h({type:"isPending"});try{s=(0,c.ET)(x,(0,r.Z)((0,r.Z)({},t),{},{createdTime:n,createdDate:i,createdUqe:o})),console.log(s),h({type:"addDoc",payload:s}),console.log("\uc800\uc7a5\uc644\ub8cc")}catch(a){h({type:"error",payload:a.message})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,n){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h({type:"isPending"}),e.prev=1,e.next=4,(0,c.r7)((0,c.JU)(x,n),(0,r.Z)({},t));case 4:i=e.sent,h({type:"editDoc",payload:i}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h({type:"error",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h({type:"isPending"}),e.prev=1,e.next=4,(0,c.oe)((0,c.JU)(x,t));case 4:n=e.sent,h({type:"deleteDoc",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h({type:"error",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.AB.fromDate(new Date),i=f("/",":"),o=d(),h({type:"isPending"});try{s=(0,c.ET)(x,(0,r.Z)((0,r.Z)({},t),{},{createdTime:n,createdDate:i,createdUqe:o})),console.log(s),h({type:"addDoc",payload:s}),console.log("\uc800\uc7a5\uc644\ub8cc")}catch(a){h({type:"error",payload:a.message})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{addDocument:Z,addComment:j,editDocument:w,deleteDocument:D,addUser:N,response:g}}}}]);
//# sourceMappingURL=444.7686b07c.chunk.js.map