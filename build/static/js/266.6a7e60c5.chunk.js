"use strict";(self.webpackChunkour_daily_life=self.webpackChunkour_daily_life||[]).push([[266],{1266:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var r=n(1413),o=n(3433),s=n(9439),i=n(2791),l=n(9434),a=n(8277),c=n(6849),d=n(8229),u=n(7689),p=n(4942),h=n(6625),f=n(184);var m=function(e){var t=(0,a.C)("FeedData"),n=t.editDocument,o=(t.response,(0,l.I0)()),c=(0,l.v9)((function(e){return e.loginUserInfo})),d=(0,i.useState)(""),u=(0,s.Z)(d,2),m=u[0],x=u[1],v=(0,i.useState)({displayName:c.displayName,UID:c.UID,replyText:""}),y=(0,s.Z)(v,2),j=y[0],w=y[1],k=(j.displayName,j.replyText);return(0,i.useEffect)((function(){return document.body.style.overflow="hidden",x("transition-end"),console.log("props",e.post),console.log("\ub313\uae00 \ub204\uac00 \uc368??",c.displayName),function(){document.body.style.overflow=""}}),[]),window.onkeydown=function(e){"Escape"===e.key&&console.log("\uafb8")},window.onkeyup=function(e){"Escape"===e.key&&(console.log("\uc6b1"),o((0,h.G)(!1)))},(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"dimmed-layer ".concat(m)}),(0,f.jsx)("div",{className:"input-area transition-start ".concat(m),children:(0,f.jsx)("div",{className:"form-container",children:(0,f.jsxs)("form",{onSubmit:function(t){t.preventDefault();var r=j,s=e.post.peopleWhoReply,i=e.post.replies;console.log("\uc2e0\uaddc \ub313\uae00 --\x3e ",r),s.push(r),i++,n({peopleWhoReply:s,replies:i},e.post.id).then((function(){o((0,h.G)(!1))}))},children:[(0,f.jsx)("div",{className:"form-group",children:(0,f.jsx)("input",{type:"text",name:"replyText",value:k,onChange:function(e){var t=e.target,n=t.value,o=t.name;w((0,r.Z)((0,r.Z)({},j),{},(0,p.Z)({},o,n)))},className:"form-control reply-text-input",placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694!",required:!0})}),(0,f.jsx)("input",{type:"submit",className:"post-btn",value:"\ub313\uae00 \ub2ec\uae30"}),(0,f.jsx)("div",{className:"close-btn",children:(0,f.jsx)(g,{onClick:function(e){e.preventDefault(),o((0,h.G)(!1))}})})]})})})]})},g=function(e){return(0,f.jsxs)("svg",(0,r.Z)((0,r.Z)({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"none"},e),{},{children:[(0,f.jsx)("title",{children:"close"}),(0,f.jsx)("path",{fill:"#FFFFFF",d:"M12.78 4.28a.75.75 0 00-1.06-1.06L8 6.94 4.28 3.22a.75.75 0 00-1.06 1.06L6.94 8l-3.72 3.72a.75.75 0 101.06 1.06L8 9.06l3.72 3.72a.75.75 0 101.06-1.06L9.06 8l3.72-3.72z"})]}))};var x=function(e){var t,n,r=(0,a.C)("FeedData"),p=r.editDocument,g=r.deleteDocument,x=(r.response,(0,d.K)("FeedData")),j=x.documents,w=(x.error,(0,c.E)()),k=(w.isAuthReady,w.user),D=(0,i.useState)(""),b=(0,s.Z)(D,2),N=b[0],Z=b[1],P=(0,u.UO)().uid,C=(0,i.useState)([]),L=(0,s.Z)(C,2),U=L[0],W=L[1],F=(0,i.useState)(!1),I=(0,s.Z)(F,2),T=I[0],M=I[1],B=(0,u.s0)(),S=(0,l.I0)(),E=(0,l.v9)((function(e){return e.replyState.rmVisible})),R=(new Date).getFullYear(),A=(0,l.v9)((function(e){return e.loginUserInfo})),Y=function(){window.scrollTo({top:0,behavior:"smooth"}),window.history.back()},_=function(e){B("/profile/".concat(e)),window.scrollTo({top:0,behavior:"smooth"}),window.location.reload()};return(0,i.useEffect)((function(){var e=setTimeout((function(){Z("transition-end")}),100);return function(){clearTimeout(e),Z(""),M(!1)}}),[]),(0,i.useEffect)((function(){W(null===j||void 0===j?void 0:j.filter((function(e,t){return e.id===P})))}),[j]),(0,i.useEffect)((function(){void 0!=U&&0!==U.length?M(!0):M(!1)}),[U]),T?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"all-feeds transition-start ".concat(N),children:[(0,f.jsx)("article",{className:"Post transition-start ".concat(N),children:(0,f.jsxs)("div",{className:"Post-area",children:[(0,f.jsxs)("div",{className:"Post-user-area",children:[(0,f.jsxs)("div",{className:"Post-writer-info",onClick:function(){return _(U[0].UID)},children:[(0,f.jsx)("div",{className:"Post-user-profileImage",children:(0,f.jsx)("img",{src:U[0].profileImage,alt:"\ud504\ub85c\ud544\uc0ac\uc9c4"})}),(0,f.jsx)("span",{className:"Post-user-id",children:U[0].displayName})]}),A.UID===U[0].UID?(0,f.jsx)("div",{className:"Post-delete-btn",children:(0,f.jsx)(v,{onClick:function(){confirm("\uac8c\uc2dc\ubb3c\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc5b4\uc694?")&&(g(U[0].id),alert("\uac8c\uc2dc\ubb3c\uc774 \uc0ad\uc81c\ub410\uc5b4\uc694!"),Y())}})}):null]}),(0,f.jsx)("div",{className:"Post-img",children:(0,f.jsx)("div",{className:"Post-img-bg",children:(0,f.jsx)("img",{src:U[0].downloadURL,alt:"\uac8c\uc2dc\ubb3c\uc0ac\uc9c4"})})}),(0,f.jsxs)("div",{className:"Post-icon-btn-area",children:[(0,f.jsxs)("div",{className:"three-btn-area",children:[(0,f.jsx)("button",{className:"like-btn",onClick:function(e){var t=U[0].likes,n=U[0].peopleWhoLike.includes(k.uid),r=(0,o.Z)(U[0].peopleWhoLike);r.includes(k.uid)?r=r.filter((function(e){return e!=k.uid})):r.push(k.uid),n?console.log("\uc88b\uc544\uc694 \ucde8\uc18c"):console.log("\uc88b\uc544\uc694"),console.log("\uc88b\uc544\ud558\ub294 \uc0ac\ub78c\ub4e4",r),n?(t--,p({peopleWhoLike:r,likes:t},U[0].id)):(t++,p({peopleWhoLike:r,likes:t},U[0].id))},children:(n=U[0].peopleWhoLike.includes(k.uid),n?(0,f.jsx)("svg",{"aria-label":"\uc88b\uc544\uc694 \ucde8\uc18c",color:"#ed4956",fill:"#ed4956",height:"24",role:"img",viewBox:"0 0 48 48",width:"24",children:(0,f.jsx)("path",{d:"M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 \r 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 \r 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 \r 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 \r 25 48 17.6c0-8-6-14.5-13.4-14.5z"})}):(0,f.jsx)("svg",{"aria-label":"\uc88b\uc544\uc694",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:(0,f.jsx)("path",{d:"M16.792 3.904A4.989 4.989 0 0121.5 9.122c0 3.072-2.652 4.959-5.197\r 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141\r 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 014.708-5.218 4.21 4.21 0 013.675\r 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 013.679-1.938m0-2a6.04\r 6.04 0 00-4.797 2.127 6.052 6.052 0 00-4.787-2.127A6.985 6.985 0 00.5 9.122c0 3.61\r 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 003.518 3.018\r 2 2 0 002.174 0 45.263 45.263 0 003.626-3.115l.922-.824c.293-.26.59-.519.885-.774\r 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 00-6.708-7.218z"})}))}),(0,f.jsx)("button",{className:"reply-btn",onClick:function(e){S((0,h.G)(!0))},children:(0,f.jsx)("svg",{"aria-label":"\ub313\uae00\uc4f0\uae30",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:(0,f.jsx)("path",{d:"M20.656 17.008a9.993 9.993 0 10-3.59 3.615L22 22z",fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})})}),(0,f.jsx)("button",{className:"share-btn",onClick:function(e){alert("\ubcf4\ub0b4\uae30 \uad6c\ud604\uc911.. ^.^")},children:(0,f.jsxs)("svg",{"aria-label":"\ubcf4\ub0b4\uae30",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:[(0,f.jsx)("line",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",x1:"22",x2:"9.218",y1:"3",y2:"10.083"}),(0,f.jsx)("polygon",{fill:"none",points:"11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2"})]})})]}),(0,f.jsx)("div",{className:"one-btn-area",children:(0,f.jsx)("button",{className:"save-btn",onClick:function(e){var t=U[0].peopleWhoSave.includes(k.uid),n=(0,o.Z)(U[0].peopleWhoSave);n.includes(k.uid)?n=n.filter((function(e){return e!=k.uid})):n.push(k.uid),t?alert("\uac8c\uc2dc\ubb3c\uc744 \ubcf4\uad00\ud568\uc5d0\uc11c \uc0ad\uc81c\ud560\uac8c\uc694!"):alert("\uac8c\uc2dc\ubb3c\uc744 \ubcf4\uad00\ud568\uc5d0 \ucd94\uac00\ud560\uac8c\uc694!"),console.log("\uc800\uc7a5\ud55c \uc0ac\ub78c\ub4e4",n),p({peopleWhoSave:n},U[0].id)},children:(t=U[0].peopleWhoSave.includes(k.uid),t?(0,f.jsx)("svg",{"aria-label":"\uc800\uc7a5 \ucde8\uc18c",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:(0,f.jsx)("polygon",{points:"20 21 12 13.44 4 21 4 3 20 3 20 21",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})}):(0,f.jsx)("svg",{"aria-label":"\uc800\uc7a5",color:"#262626",fill:"#262626",height:"24",role:"img",viewBox:"0 0 24 24",width:"24",children:(0,f.jsx)("polygon",{fill:"none",points:"20 21 12 13.44 4 21 4 3 20 3 20 21",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})}))})})]}),(0,f.jsx)("div",{className:"Post-like-area",children:(0,f.jsx)("p",{className:"Post-like-count",children:(0,f.jsx)("b",{children:U[0].likes})})}),(0,f.jsx)("div",{className:"Post-text-area",children:(0,f.jsxs)("div",{className:"Post-text",children:[(0,f.jsx)("div",{className:"Post-writer-name",onClick:function(){_(U[0].UID)},children:(0,f.jsx)("b",{children:U[0].displayName})}),(0,f.jsx)("div",{className:"Post-text-postText",children:U[0].postText})]})}),U[0].replies>0?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"Post-reply-border"}),(0,f.jsx)("div",{className:"Post-reply-area",children:U[0].peopleWhoReply.map((function(e,t){return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"Post-reply-with-btn",children:[(0,f.jsxs)("div",{className:"Post-reply",children:[(0,f.jsx)("span",{className:"Post-reply-nickname",onClick:function(){_(e.UID)},children:(0,f.jsx)("b",{children:e.displayName})}),(0,f.jsx)("span",{className:"Post-reply-text",children:e.replyText})]},e.UID+t),A.UID===U[0].UID?(0,f.jsx)("div",{className:"reply-delete-btn",children:(0,f.jsx)(y,{onClick:function(){!function(e){if(confirm("\uc774 \ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc5b4\uc694?")){console.log("\uc0ad\uc81c\ud560 \ub313\uae00 --\x3e ",e);var t=(0,o.Z)(U[0].peopleWhoReply),n=(t=t.filter((function(t){return t.UID+t.replyText!==e.UID+e.replyText}))).length;console.log("\ub313\uae00 \uc0ad\uc81c \uacb0\uacfc --\x3e ",t,n),p({peopleWhoReply:t,replies:n},U[0].id)}}(e)}})}):null]})})}))})]}):null,(0,f.jsx)("div",{className:"post-date",children:R===1*U[0].createdDate.substring(0,4)?U[0].createdDate.substring(5,7)+"\uc6d4 "+U[0].createdDate.substring(8,10)+"\uc77c "+U[0].createdDate.substring(11):U[0].createdDate.substring(0,4)+"\ub144 "+U[0].createdDate.substring(5,7)+"\uc6d4 "+U[0].createdDate.substring(8,10)+"\uc77c "+U[0].createdDate.substring(11)})]})}),(0,f.jsx)("div",{className:"detail-btn-area",children:(0,f.jsx)("button",{className:"go-main-btn",onClick:Y,children:"\ub3cc\uc544\uac00\uae30"})})]}),E?(0,f.jsx)(m,{post:U[0]}):null]}):null},v=function(e){return(0,f.jsxs)("svg",(0,r.Z)((0,r.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"#000000",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round"},e),{},{children:[(0,f.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,f.jsx)("path",{id:"post-delete-btn",d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})]}))},y=function(e){return(0,f.jsx)("svg",(0,r.Z)((0,r.Z)({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none"},e),{},{children:(0,f.jsx)("path",{id:"reply-delete-btn",opacity:.5,stroke:"#000000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.4,d:"M12 12 7 7m5 5 5 5m-5-5 5-5m-5 5-5 5"})}))}},8277:function(e,t,n){n.d(t,{C:function(){return m}});var r=n(4165),o=n(1413),s=n(5861),i=n(9439),l=n(2791),a=n(77),c=n(7799),d=n(276);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=new Date,s=o.getFullYear(),i=o.getMonth(),l=o.getDate(),a=o.getHours(),c=o.getMinutes(),d=o.getMilliseconds();return 0!==t&&o.setMonth(o.getMonth()+t),0!==n&&o.setDate(o.getDate()+n),0!==s&&o.setFullYear(o.getFullYear()+r),i=("0"+(1+o.getMonth())).slice(-2),l=("0"+o.getDate()).slice(-2),(s=o.getFullYear())+e+i+e+l+a+c+d}function p(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",n=arguments.length>2?arguments[2]:void 0,r=n.getFullYear(),o=n.getMonth()+1,s=n.getDate(),i=n.getHours(),l=n.getMinutes();1===(""+o).length&&(o="0"+o);1===(""+s).length&&(s="0"+s);1===(""+i).length&&(i="0"+i);1===(""+l).length&&(l="0"+l);return""+r+e+o+e+s+" "+i+t+l}(e,t,new Date)}var h={document:null,isPending:!1,error:null,success:!1},f=function(e,t){switch(t.type){case"isPending":return{isPending:!0,document:null,success:!1,error:null};case"addDoc":case"editDoc":case"deleteDoc":return{isPending:!1,document:t.payload,success:!0,error:null};case"error":return{isPending:!1,document:null,success:!1,error:t.payload};default:return e}},m=function(e){var t=(0,l.useReducer)(f,h),n=(0,i.Z)(t,2),m=n[0],g=n[1],x=(0,l.useState)([]),v=(0,i.Z)(x,2),y=(v[0],v[1],(0,c.hJ)(a.d_,e)),j=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s,i,l,h,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.AB.fromDate(new Date),i=p("/",":"),l=u(),h=(0,d.iH)(a.tO,"images/"+n.name),f=(0,d.B0)(h,n),g({type:"isPending"});try{f.on("state_changed",(function(e){}),(function(e){console.error("\uc2e4\ud328\uc0ac\uc720\ub294",e)}),(function(){(0,d.Jt)(f.snapshot.ref).then((function(e){console.log("\uc5c5\ub85c\ub4dc\ub41c \uacbd\ub85c\ub294",e);var n=(0,c.ET)(y,(0,o.Z)((0,o.Z)({},t),{},{createdTime:s,createdDate:i,createdUqe:l,downloadURL:e}));console.log(n),g({type:"addDoc",payload:n}),console.log("\uc800\uc7a5\uc644\ub8cc")}))}))}catch(r){g({type:"error",payload:r.message})}case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n,s,i,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.AB.fromDate(new Date),s=p("/",":"),i=u(),g({type:"isPending"});try{l=(0,c.ET)(y,(0,o.Z)((0,o.Z)({},t),{},{createdTime:n,createdDate:s,createdUqe:i})),console.log(l),g({type:"addDoc",payload:l}),console.log("\uc800\uc7a5\uc644\ub8cc")}catch(r){g({type:"error",payload:r.message})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"isPending"}),e.prev=1,e.next=4,(0,c.r7)((0,c.JU)(y,n),(0,o.Z)({},t));case 4:s=e.sent,g({type:"editDoc",payload:s}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),g({type:"error",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:"isPending"}),e.prev=1,e.next=4,(0,c.oe)((0,c.JU)(y,t));case 4:n=e.sent,g({type:"deleteDoc",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),g({type:"error",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n,s,i,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.AB.fromDate(new Date),s=p("/",":"),i=u(),g({type:"isPending"});try{l=(0,c.ET)(y,(0,o.Z)((0,o.Z)({},t),{},{createdTime:n,createdDate:s,createdUqe:i})),console.log(l),g({type:"addDoc",payload:l}),console.log("\uc800\uc7a5\uc644\ub8cc")}catch(r){g({type:"error",payload:r.message})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{addDocument:j,addComment:w,editDocument:k,deleteDocument:D,addUser:b,response:m}}}}]);
//# sourceMappingURL=266.6a7e60c5.chunk.js.map