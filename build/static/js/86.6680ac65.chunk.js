"use strict";(self.webpackChunkour_daily_life=self.webpackChunkour_daily_life||[]).push([[86],{8086:function(e,t,n){n.r(t);var r=n(1413),a=n(9439),o=n(2791),s=n(9434),c=n(6849),i=n(1542),l=n(2969),u=n(8277),d=n(8547),p=n(184);t.default=function(){var e=(0,c.E)(),t=(e.isAuthReady,e.user),n=(0,i.e)("UserData",["UID","==",t.uid]),g=n.documents,h=(n.error,(0,s.v9)((function(e){return e.inputState}))),m=(0,s.v9)((function(e){return e.inputState.visible})),v=(0,s.v9)((function(e){return e.loginUserInfo})),y=(0,s.I0)(),x=(0,o.useState)(""),Z=(0,a.Z)(x,2),D=Z[0],w=Z[1],j=(0,o.useState)(""),k=(0,a.Z)(j,2),F=k[0],M=k[1],b=(0,o.useState)(""),E=(0,a.Z)(b,2),S=E[0],U=E[1],N=(0,o.useRef)("");(0,o.useEffect)((function(){document.body.style.overflow=m?"hidden":"",y((0,l.AM)("")),w(""),U(m?"transition-end":"")}),[m]),(0,o.useEffect)((function(){return console.log(t),y((0,l.WG)(t.email)),y((0,l.qS)(t.uid)),y((0,l.hC)(t.displayName)),function(){y((0,l.yx)(!1)),y((0,l.AM)("")),y((0,l.WG)("")),y((0,l.qS)(""))}}),[]),(0,o.useEffect)((function(){if(console.log("|\ud604\uc7ac \uc0ac\uc6a9\uc790 \uc815\ubcf4(firebase)|",g),null!=g&&0!==g.length){var e=g[0];delete e.createdTime,y((0,d.x)(e)),console.log("redux state\uc5d0\ub3c4 \uc800\uc7a5",v)}}),[g]),window.onkeydown=function(e){"Escape"===e.key&&console.log("\ub538")},window.onkeyup=function(e){"Escape"===e.key&&(console.log("\uae4d"),y((0,l.yx)(!1)))};var P=(0,u.C)("FeedData"),T=P.addDocument,C=(P.response,function(e){var t={type:e.target.type,value:e.target.value};"text"===t.type?y((0,l.AM)(t.value)):_(e)}),_=function(e){var t=new FileReader;t.onload=function(e){w(e.target.result)},console.log(e.target.files[0]),t.readAsDataURL(e.target.files[0]),M(e.target.files[0])};return(0,p.jsx)(p.Fragment,{children:m?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"dimmed-layer ".concat(S)}),(0,p.jsx)("div",{ref:N,className:"input-area transition-start ".concat(S),children:(0,p.jsx)("div",{className:"form-container",children:(0,p.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=(0,r.Z)({},h);t.peopleWhoLike=[],t.likes=0,t.peopleWhoReply=[],t.replies=0,t.profileImage=g[0].profileImage,console.log("\uac8c\uc2dc\ubb3c \uc5c5\ub85c\ub4dc! ",t),T(t,F),y((0,l.yx)(!1))},children:[(0,p.jsx)("h3",{children:"\uc0c8 \uac8c\uc2dc\ubb3c \ub9cc\ub4e4\uae30"}),(0,p.jsx)("div",{className:"form-group",children:(0,p.jsx)("input",{accept:"image/jpeg,image/png,image/heic,image/heif,video/mp4,video/quicktime",className:"img-input",multiple:"",type:"file",onChange:C,required:!0})}),D.length>0&&(0,p.jsx)("img",{src:D,alt:"",style:{marginBottom:"13px",width:"80%",maxHeight:"200px"}}),(0,p.jsx)("div",{className:"form-group",children:(0,p.jsx)("input",{type:"text",value:h.postText,onChange:C,className:"form-control",name:"postText",placeholder:"\ubb38\uad6c \uc785\ub825",required:!0})}),(0,p.jsx)("input",{type:"submit",className:"post-btn",value:"\uacf5\uc720\ud558\uae30"}),(0,p.jsx)("div",{className:"close-btn",children:(0,p.jsx)(f,{onClick:function(e){e.preventDefault(),y((0,l.yx)(!1))}})})]})})})]}):null})};var f=function(e){return(0,p.jsxs)("svg",(0,r.Z)((0,r.Z)({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"none"},e),{},{children:[(0,p.jsx)("title",{children:"close"}),(0,p.jsx)("path",{fill:"#FFFFFF",d:"M12.78 4.28a.75.75 0 00-1.06-1.06L8 6.94 4.28 3.22a.75.75 0 00-1.06 1.06L6.94 8l-3.72 3.72a.75.75 0 101.06 1.06L8 9.06l3.72 3.72a.75.75 0 101.06-1.06L9.06 8l3.72-3.72z"})]}))}},1542:function(e,t,n){n.d(t,{e:function(){return l}});var r=n(1413),a=n(3433),o=n(9439),s=n(77),c=n(2791),i=n(7799),l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=(0,c.useState)(null),u=(0,o.Z)(l,2),d=u[0],p=u[1],f=(0,c.useState)(null),g=(0,o.Z)(f,2),h=g[0],m=g[1];return(0,c.useEffect)((function(){var o;o=n.length>0?(0,i.IO)((0,i.hJ)(s.d_,e),i.ar.apply(void 0,(0,a.Z)(t)),(0,i.Xo)("createdTime","desc")):(0,i.IO)((0,i.hJ)(s.d_,e),i.ar.apply(void 0,(0,a.Z)(t))),console.log(o);var c=(0,i.cf)(t?o:(0,i.hJ)(s.d_,e),(function(e){var t=[];e.docs.forEach((function(e){t.push((0,r.Z)((0,r.Z)({},e.data()),{},{id:e.id}))})),console.log(t),p(t),m(null)}),(function(e){m(e.message)}));return c}),[i.hJ]),{documents:d,error:h}}},8277:function(e,t,n){n.d(t,{C:function(){return h}});var r=n(4165),a=n(1413),o=n(5861),s=n(9439),c=n(2791),i=n(77),l=n(7799),u=n(276);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=new Date,o=a.getFullYear(),s=a.getMonth(),c=a.getDate(),i=a.getHours(),l=a.getMinutes(),u=a.getMilliseconds();return 0!==t&&a.setMonth(a.getMonth()+t),0!==n&&a.setDate(a.getDate()+n),0!==o&&a.setFullYear(a.getFullYear()+r),s=("0"+(1+a.getMonth())).slice(-2),c=("0"+a.getDate()).slice(-2),(o=a.getFullYear())+e+s+e+c+i+l+u}function p(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",n=arguments.length>2?arguments[2]:void 0,r=n.getFullYear(),a=n.getMonth()+1,o=n.getDate(),s=n.getHours(),c=n.getMinutes();1===(""+a).length&&(a="0"+a);1===(""+o).length&&(o="0"+o);1===(""+s).length&&(s="0"+s);1===(""+c).length&&(c="0"+c);return""+r+e+a+e+o+" "+s+t+c}(e,t,new Date)}var f={document:null,isPending:!1,error:null,success:!1},g=function(e,t){switch(t.type){case"isPending":return{isPending:!0,document:null,success:!1,error:null};case"addDoc":case"editDoc":case"deleteDoc":return{isPending:!1,document:t.payload,success:!0,error:null};case"error":return{isPending:!1,document:null,success:!1,error:t.payload};default:return e}},h=function(e){var t=(0,c.useReducer)(g,f),n=(0,s.Z)(t,2),h=n[0],m=n[1],v=(0,c.useState)([]),y=(0,s.Z)(v,2),x=(y[0],y[1],(0,l.hJ)(i.d_,e)),Z=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o,s,c,f,g;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=i.AB.fromDate(new Date),s=p("/",":"),c=d(),f=(0,u.iH)(i.tO,"images/"+n.name),g=(0,u.B0)(f,n),m({type:"isPending"});try{g.on("state_changed",(function(e){}),(function(e){console.error("\uc2e4\ud328\uc0ac\uc720\ub294",e)}),(function(){(0,u.Jt)(g.snapshot.ref).then((function(e){console.log("\uc5c5\ub85c\ub4dc\ub41c \uacbd\ub85c\ub294",e);var n=(0,l.ET)(x,(0,a.Z)((0,a.Z)({},t),{},{createdTime:o,createdDate:s,createdUqe:c,downloadURL:e}));console.log(n),m({type:"addDoc",payload:n}),console.log("\uc800\uc7a5\uc644\ub8cc")}))}))}catch(r){m({type:"error",payload:r.message})}case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.AB.fromDate(new Date),o=p("/",":"),s=d(),m({type:"isPending"});try{c=(0,l.ET)(x,(0,a.Z)((0,a.Z)({},t),{},{createdTime:n,createdDate:o,createdUqe:s})),console.log(c),m({type:"addDoc",payload:c}),console.log("\uc800\uc7a5\uc644\ub8cc")}catch(r){m({type:"error",payload:r.message})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m({type:"isPending"}),e.prev=1,e.next=4,(0,l.r7)((0,l.JU)(x,n),(0,a.Z)({},t));case 4:o=e.sent,m({type:"editDoc",payload:o}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),m({type:"error",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m({type:"isPending"}),e.prev=1,e.next=4,(0,l.oe)((0,l.JU)(x,t));case 4:n=e.sent,m({type:"deleteDoc",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),m({type:"error",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.AB.fromDate(new Date),o=p("/",":"),s=d(),m({type:"isPending"});try{c=(0,l.ET)(x,(0,a.Z)((0,a.Z)({},t),{},{createdTime:n,createdDate:o,createdUqe:s})),console.log(c),m({type:"addDoc",payload:c}),console.log("\uc800\uc7a5\uc644\ub8cc")}catch(r){m({type:"error",payload:r.message})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{addDocument:Z,addComment:D,editDocument:w,deleteDocument:j,addUser:k,response:h}}}}]);
//# sourceMappingURL=86.6680ac65.chunk.js.map