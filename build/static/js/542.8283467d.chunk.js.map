{"version":3,"file":"static/js/542.8283467d.chunk.js","mappings":"+MA+DA,UAxDA,WACI,IAAMA,GAAWC,EAAAA,EAAAA,KAAY,SAACC,GAAK,OAAKA,EAAMC,KAAK,IACnD,GAA0BC,EAAAA,EAAAA,GAAc,YAAjCC,EAAS,EAATA,UACP,GADsB,EAALC,OACKC,EAAAA,EAAAA,UAAS,KAAG,eAA7BC,EAAI,KAAEC,EAAO,KACdC,GAAWC,EAAAA,EAAAA,MA4Bf,OA1BAC,EAAAA,EAAAA,YAAU,WACNC,QAAQC,IAAI,YAAYd,EAC5B,GAAG,KAEHY,EAAAA,EAAAA,YAAU,WACNC,QAAQC,IAAI,cAAcT,GAC1BI,EAAoB,MAAZJ,GAAoBA,EAAUU,OAAS,EAAG,iBAAkB,IAGpE,IAAIC,EAAQ,GAEH,OAATX,QAAS,IAATA,GAAAA,EAAWY,KAAI,SAACC,EAAEC,GACdH,EAAMI,KAAK,CAACC,IAAMH,EAAEG,IAAKC,KAAOJ,EAAEK,aACtC,IACA,IAAIC,EAEJA,EAAYR,EAAMS,QAAO,SAACC,EAAKC,GAI3B,OAHqD,IAAjDD,EAAIE,WAAU,YAAM,SAAHP,MAAkBM,EAAIN,GAAG,KAC1CK,EAAIN,KAAKO,GAEND,CACX,GAAG,IACHb,QAAQC,IAAI,kCAAUU,GACtBd,GAASmB,EAAAA,EAAAA,GAAYL,GACzB,GAAG,CAACnB,KAGA,+BACI,iBAAKyB,UAAS,qCAAgCtB,GAAO,UAG7CH,EACAA,EAAUY,KAAI,SAACC,EAAEC,GACb,IAAIY,GAAI,UAAOb,GACf,OAAQ,SAAC,IAAI,CAAyBa,KAAMA,GAAzBZ,EAAEnB,EAASe,OAClC,IACE,KAKFf,EAASiB,KAAI,SAACC,EAAEC,GACZ,OAAQ,SAAC,IAAI,CAAWY,KAAMb,GAAXC,EAAE,EACzB,QAKpB,C,2GCrDaf,EAAgB,SAAC4B,GAG1B,OAAkCzB,EAAAA,EAAAA,UAAS,MAAK,eAAzCF,EAAS,KAAE4B,EAAY,KAC9B,GAA0B1B,EAAAA,EAAAA,UAAS,MAAK,eAAjCD,EAAK,KAAE4B,EAAQ,KAgCtB,OA7BAtB,EAAAA,EAAAA,YAAU,WACN,IAAIuB,EACAA,GAAIC,EAAAA,EAAAA,KAAMC,EAAAA,EAAAA,IAAWC,EAAAA,GAAcN,IAAaO,EAAAA,EAAAA,IAAQ,cAAc,SAK1E,IAAMC,GAAcC,EAAAA,EAAAA,IAAWN,GAG3B,SAACO,GACG,IAAIC,EAAS,GAEbD,EAASE,KAAKC,SAAQ,SAACC,GAEnBH,EAAOvB,MAAK,kBAAK0B,EAAIC,QAAM,IAAEC,GAAIF,EAAIE,KACzC,IAEAf,EAAaU,GACbT,EAAS,KACb,IACA,SAAC5B,GACG4B,EAAS5B,EAAM2C,QACnB,IAGJ,OAAOT,CAEX,GAAG,CAACH,EAAAA,KACG,CAAEhC,UAAAA,EAAWC,MAAAA,EACxB,C","sources":["components/Feeds.js","hooks/useCollection.js"],"sourcesContent":["/*eslint-disable */\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Post from \"./Post\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useCollection } from '../hooks/useCollection';\r\nimport { setUserList } from \"../store/searchSlice\";\r\n\r\nfunction Feeds() {\r\n    const postList = useSelector((state) => state.feeds); // ë¡œì»¬ ìƒ˜í”Œ ë°ì´í„°\r\n    const {documents,error} = useCollection(\"FeedData\"); // ì„œë²„ ë¦¬ì–¼ ë°ì´í„°\r\n    let [fade, setFade] = useState('') // Animation Style State\r\n    let dispatch = useDispatch()\r\n\r\n    useEffect(()=>{\r\n        console.log('Mock Data',postList)\r\n    }, [])\r\n\r\n    useEffect(()=>{\r\n        console.log('Server Data',documents)\r\n        setFade(documents!= null && documents.length > 0? 'transition-end': '') // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼\r\n\r\n        // ì „ì²´ ê¸€ì˜ ì‚¬ìš©ì ì •ë³´(UID , displayName)ë¥¼ ë°›ì•„ì„œ redux storeì— ë„£ê¸° (for ê²€ìƒ‰ ìë™ì™„ì„±)\r\n        let users = [] // ì „ì²´ ìœ ì €\r\n        // ìˆì„ ë•Œë§Œ ëŒë¦½ì‹œë‹¤?\r\n        documents?.map((a,i)=>{\r\n            users.push({UID : a.UID, Name : a.displayName})\r\n        });\r\n        let uniqUsers = [] // ì¤‘ë³µ X ìœ ì €\r\n        // ì¤‘ë³µ ì œê±°\r\n        uniqUsers = users.reduce((acc, cur)=>{\r\n            if (acc.findIndex(({ UID }) => UID === cur.UID) === -1) {\r\n                acc.push(cur)\r\n            }\r\n            return acc;\r\n        }, []);\r\n        console.log(\"ìœ ì € ë¦¬ìŠ¤íŠ¸\", uniqUsers)\r\n        dispatch(setUserList(uniqUsers))\r\n    }, [documents])\r\n\r\n    return (\r\n        <>\r\n            <div className={`all-feeds transition-start ${fade}`}>\r\n                {/* ë¦¬ì–¼ ë°ì´í„° ì¶œë ¥ */}\r\n                {\r\n                    documents ? \r\n                    documents.map((a,i) => {\r\n                        let post = {...a}\r\n                        return (<Post key={i+postList.length} post={post}/>) \r\n                    })\r\n                    : null\r\n                }\r\n\r\n                {/* ìƒ˜í”Œ ë°ì´í„° ì¶œë ¥ */}\r\n                {\r\n                    postList.map((a,i) => {\r\n                        return (<Post key={i+1} post={a} />)\r\n                    })\r\n                }\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Feeds;","/* eslint-disable*/\r\n\r\n// ì»¬ë ‰ì…˜ì— ì ‘ê·¼í•˜ì—¬ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê¸°ëŠ¥ì„ ìœ„í•œ í›…\r\n// ë©”ì¸í™”ë©´ì—ì„œ ì‚¬ìš©\r\nimport { appFireStore } from \"../firebase/config\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { onSnapshot,collection,query,where, orderBy } from \"firebase/firestore\";\r\n\r\nexport const useCollection = (transaction) => {\r\n\r\n    // documents ë°ì´í„° ê´€ë¦¬, error ê´€ë¦¬\r\n    const [documents, setDocuments] = useState(null);\r\n    const [error, setError] = useState(null);\r\n\r\n    // ğŸ’› collectionì— ë³€í™”ê°€ ìƒê¸¸ë•Œë§ˆë‹¤ ì‹¤í–‰í•©ë‹ˆë‹¤. ë•Œë¬¸ì— í•­ìƒ ìµœì‹ ì˜ ì»¬ë™ì…˜ ìƒíƒœë¥¼ ë°˜í™˜ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n    useEffect(() => {\r\n        let q;\r\n            q = query(collection(appFireStore, transaction),orderBy(\"createdTime\",\"desc\"));\r\n            \r\n        // onSnapshot: ê°€ì¥ ìµœê·¼ ì»¬ë™ì…˜ì˜ ë‚´ìš© ë°˜í™˜ \r\n        // unsubscribe: ë°ì´í„° ìˆ˜ì‹ ì„ ì¤‘ë‹¨(ë°ì´í„° ì˜¤ëŠ”ê±° ê¸°ë‹¤ë¦´ í•„ìš”ê°€ ì—†ì„ë•Œ ì‚¬ìš©.)\r\n        // const unsubscribe = onSnapshot(myQuery ? q : (collection(appFireStore, transaction)),\r\n        const unsubscribe = onSnapshot(q ,\r\n            \r\n            // ì‘ë‹µë°›ì€ ì»¬ë™ì…˜ì„ snapshotì— ì €ì¥\r\n            (snapshot) => {\r\n                let result = [];\r\n                // ë°°ì—´í˜•íƒœë¡œ ì €ì¥ë˜ì–´ìˆìŒ => forEach ì‚¬ìš©\r\n                snapshot.docs.forEach((doc) => {\r\n                    // document ë°ì´í„°ë‘ id ê°’ push í•´ì£¼ê¸°\r\n                    result.push({ ...doc.data(), id: doc.id });\r\n                })\r\n\r\n                setDocuments(result);\r\n                setError(null);\r\n            },\r\n            (error) => {\r\n                setError(error.message);\r\n            });\r\n            \r\n        //ğŸ’› ì™¸ë¶€ì—ì„œ ë°ì´í„°ë¥¼ êµ¬ë…í•˜ëŠ” ê²½ìš° clean-up í•¨ìˆ˜ëŠ” useEffectí›…ì„ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë ë•Œ ì‹¤í–‰ë˜ì–´ êµ¬ë…ì„ ì¢…ë£Œí•˜ê²Œ ë©ë‹ˆë‹¤.\r\n        return unsubscribe; // clean-up í•¨ìˆ˜\r\n\r\n    }, [collection])// ë§¤ë²ˆ ì‹¤í–‰ë  í•„ìš”ê°€ ì—†ê³ , ì»¬ë™ì…˜ ë³€í™”ê°€ \r\n    return { documents, error }\r\n}"],"names":["postList","useSelector","state","feeds","useCollection","documents","error","useState","fade","setFade","dispatch","useDispatch","useEffect","console","log","length","users","map","a","i","push","UID","Name","displayName","uniqUsers","reduce","acc","cur","findIndex","setUserList","className","post","transaction","setDocuments","setError","q","query","collection","appFireStore","orderBy","unsubscribe","onSnapshot","snapshot","result","docs","forEach","doc","data","id","message"],"sourceRoot":""}