"use strict";(self.webpackChunkour_daily_life=self.webpackChunkour_daily_life||[]).push([[444],{3444:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var a=t(1413),r=t(9439),i=t(2791),o=t(6849),s=t(1542),l=t(2969),c=t(9434),u=t(7689),d=t(4942),f=t(8277),p=t(9693),m=t(67),g=t(276),h=t(77),v=t(6152),x=t(184);var y=function(e){var n=(0,o.E)().user,t=(0,s.e)("FeedData",["UID","==",n.uid]).documents,l=(0,s.e)("UserData",["UID","==",n.uid]).documents,u=(0,f.C)("FeedData").editDocument,y=(0,f.C)("UserData").editDocument,Z=(0,c.v9)((function(e){return e.profileState.pfVisible})),j=(0,c.I0)(),D=(0,i.useState)(""),N=(0,r.Z)(D,2),I=N[0],U=N[1],k=(0,i.useState)(""),b=(0,r.Z)(k,2),E=b[0],F=b[1],S=(0,i.useState)(""),C=(0,r.Z)(S,2),L=C[0],M=C[1],R=(0,i.useState)({displayName:"",profileImage:"",profileIntro:""}),q=(0,r.Z)(R,2),P=q[0],_=q[1],J=(0,i.useState)(!1),T=(0,r.Z)(J,2),B=T[0],A=T[1],O=(0,i.useState)(""),Y=(0,r.Z)(O,2),H=Y[0],V=Y[1],X=(0,i.useState)(!1),z=(0,r.Z)(X,2),W=z[0],G=z[1],K=(0,i.useState)(!1),Q=(0,r.Z)(K,2),$=Q[0],ee=Q[1],ne=P.displayName,te=P.profileImage,ae=P.profileIntro,re=function(e){var n=e.target,t=n.value,r=n.name;"text"===e.target.type?_((0,a.Z)((0,a.Z)({},P),{},(0,d.Z)({},r,t))):ie(e)},ie=function(e){var n=new FileReader;n.onload=function(e){U(e.target.result)},n.readAsDataURL(e.target.files[0]),F(e.target.files[0])};return(0,i.useEffect)((function(){""!==H&&void 0!==H&&(_((0,a.Z)((0,a.Z)({},P),{},{profileImage:H})),G(!0))}),[H]),(0,i.useEffect)((function(){W&&(0!==t.length&&t.map((function(e,n){u({displayName:ne,profileImage:te},e.id)})),y({profileIntro:ae,displayName:ne,profileImage:te},l[0].id).then((function(){j((0,p.n)(!1))})))}),[W]),(0,i.useEffect)((function(){return document.body.style.overflow="hidden",M("transition-end"),U(""),A(!1),G(!1),ee(!1),function(){document.body.style.overflow=""}}),[]),(0,i.useEffect)((function(){null!=t&&null!=l&&_({displayName:l[0].displayName,profileImage:l[0].profileImage,profileIntro:l[0].profileIntro})}),[l,t]),(0,i.useEffect)((function(){_((0,a.Z)((0,a.Z)({},P),{},{profileImage:E})),A(!0)}),[E]),(0,i.useEffect)((function(){A(!1),G(!1),ee(!1)}),[Z]),window.onkeydown=function(e){"Escape"===e.key&&console.log("\uafb8")},window.onkeyup=function(e){"Escape"===e.key&&(console.log("\uc6b1"),j((0,p.n)(!1)))},(0,x.jsxs)(x.Fragment,{children:[$?(0,x.jsx)(v.Z,{}):null,(0,x.jsx)("div",{className:"dimmed-layer ".concat(L)}),(0,x.jsx)("div",{className:"input-area transition-start ".concat(L),children:(0,x.jsx)("div",{className:"form-container",children:(0,x.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),ee(!0),B){var n=(0,g.iH)(h.tO,"images/"+te.name),a=(0,g.B0)(n,te);setTimeout((function(){(0,g.Jt)(a.snapshot.ref).then((function(e){V(e)})).catch((function(e){alert("\uc11c\ubc84\uc5d0 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc5b4\uc694\ud83d\ude25 \n \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694!"),j((0,p.n)(!1))}))}),3e3)}else 0!==t.length&&t.map((function(e,n){u({displayName:ne},e.id)})),y({profileIntro:ae,displayName:ne},l[0].id).then((function(){j((0,p.n)(!1))}))},children:[(0,x.jsx)("h3",{children:"\ub0b4 \ud504\ub85c\ud544"}),(0,x.jsxs)("div",{className:"form-group profile-input",children:[(0,x.jsx)(m.Z,{}),(0,x.jsx)("input",{accept:"image/jpeg,image/png,image/heic,image/heif,video/mp4,video/quicktime",className:"img-input profile-text-input",multiple:"",type:"file",onChange:re})]}),I.length>0&&(0,x.jsx)("img",{src:I,alt:"",style:{marginBottom:"13px",width:"70%",maxWidth:"200px",maxHeight:"200px",borderRadius:"100%"}}),(0,x.jsxs)("div",{className:"form-group profile-input",children:[(0,x.jsx)(m.Z,{}),(0,x.jsx)("input",{type:"text",name:"displayName",value:ne,onChange:re,className:"form-control profile-text-input",placeholder:"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694!",required:!0})]}),(0,x.jsxs)("div",{className:"form-group profile-input",children:[(0,x.jsx)(m.Z,{}),(0,x.jsx)("input",{type:"text",name:"profileIntro",value:ae,onChange:re,className:"form-control profile-text-input",placeholder:"\uc18c\uac1c\uae00\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694!",required:!0})]}),(0,x.jsx)("input",{type:"submit",className:"post-btn",value:"\uc800\uc7a5\ud558\uae30"}),(0,x.jsx)("div",{className:"close-btn",children:(0,x.jsx)(w,{onClick:function(e){e.preventDefault(),j((0,p.n)(!1))}})})]})})})]})},w=function(e){return(0,x.jsxs)("svg",(0,a.Z)((0,a.Z)({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"none"},e),{},{children:[(0,x.jsx)("title",{children:"close"}),(0,x.jsx)("path",{fill:"#FFFFFF",d:"M12.78 4.28a.75.75 0 00-1.06-1.06L8 6.94 4.28 3.22a.75.75 0 00-1.06 1.06L6.94 8l-3.72 3.72a.75.75 0 101.06 1.06L8 9.06l3.72 3.72a.75.75 0 101.06-1.06L9.06 8l3.72-3.72z"})]}))};var Z=function(e){var n=(0,o.E)().user,t=(0,u.UO)().uid,a=(0,s.e)("FeedData",["UID","==",t]).documents,d=(0,s.e)("UserData",["UID","==",t]).documents,f=(0,i.useState)(!1),m=(0,r.Z)(f,2),g=m[0],h=m[1],v=(0,c.v9)((function(e){return e.loginUserInfo})),w=(0,i.useState)(""),Z=(0,r.Z)(w,2),D=Z[0],N=Z[1],I=(0,c.v9)((function(e){return e.profileState.pfVisible})),U=(0,c.I0)(),k=(0,u.s0)(),b=function(e){k("/detail/"+e.id)};return(0,i.useEffect)((function(){h(!1)}),[]),(0,i.useEffect)((function(){h(!0)}),[a]),(0,i.useEffect)((function(){N(g?"transition-end":"")}),[g]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("section",{children:[(0,x.jsx)("div",{className:"container transition-start ".concat(D),children:(0,x.jsxs)("div",{className:"container-wrap",children:[(0,x.jsx)("img",{className:"profile-img",src:n.uid===t?v.profileImage:g&&null!=d&&0!==d.length?d[0].profileImage:"/assets/profile_default.png",alt:"\ud504\ub85c\ud544 \uc0ac\uc9c4"}),(0,x.jsxs)("div",{className:"profile-info",children:[n.uid===t?(0,x.jsxs)("h3",{className:"profile-displayname",children:["@",v.displayName]}):(0,x.jsxs)("h3",{className:"profile-displayname",children:["@",g&&null!=d&&0!==d.length?d[0].displayName:"\ub370\uc774\ud130\uac00 \uc5c6\uc5b4\uc694!"]}),n.uid===t?(0,x.jsxs)("h4",{className:"profile-email",children:["\u2709\xa0",n.uid===t?n.email:g&&null!=a&&0!==a.length?a[0].userEmail:"\ub370\uc774\ud130\uac00 \uc5c6\uc5b4\uc694!"]}):null,(0,x.jsx)("p",{className:"profile-intro",children:g&&null!=d&&0!==d.length?d[0].profileIntro:"\ub370\uc774\ud130\uac00 \uc5c6\uc5b4\uc694!"}),n.uid===t?(0,x.jsx)("button",{onClick:function(){U((0,p.n)(!0))},children:"\ud504\ub85c\ud544 \ubcc0\uacbd"}):null]})]})}),(0,x.jsxs)("div",{className:"content-list transition-start ".concat(D),children:[(0,x.jsx)("div",{className:g&&null!=a&&a.length>2?"content-wrap":g&&null!=a&&2===a.length?"content-wrap-two":g&&null!=a&&1===a.length?"content-wrap-one":"content-wrap-no-post",children:g&&null!=a&&0!==a.length?a.sort((function(e,n){return n.createdUqe.substring(0,10)-e.createdUqe.substring(0,10)})).map((function(e,n){return e.downloadURL.includes("mov")||e.downloadURL.includes("mp4")||e.downloadURL.includes("m4v")?(0,x.jsxs)("div",{className:"my-img my-vid-container",onClick:function(n){return b(e)},children:[(0,x.jsx)("video",{className:"my-img my-vid",src:e.downloadURL+"#t=0.001"},e.createdUqe),(0,x.jsx)("div",{className:"i-am-video",children:(0,x.jsx)(j,{})})]}):(0,x.jsx)("img",{className:"my-img",src:e.downloadURL,alt:"\uc0ac\uc9c4",onClick:function(n){return b(e)}},e.createdUqe)})):(0,x.jsxs)("div",{className:"no-post",children:[(0,x.jsx)("p",{children:"\uc791\uc131\ub41c \uac8c\uc2dc\ubb3c\uc774 \uc5c6\uc5b4\uc694!"}),n.uid===t?(0,x.jsx)("button",{className:"upload-btn-profile",onClick:function(){U((0,l.yx)(!0))},children:"\uac8c\uc2dc\ubb3c \uc791\uc131\ud558\uae30"}):null]})}),(0,x.jsx)("div",{className:"profile-go-main-btn-area",children:(0,x.jsx)("button",{className:"go-main-btn",onClick:function(){k("/"),window.scrollTo({top:0,behavior:"smooth"})},children:"\ub3cc\uc544\uac00\uae30"})})]})]}),I?(0,x.jsx)(y,{}):null]})},j=function(e){return(0,x.jsxs)("svg",(0,a.Z)((0,a.Z)({fill:"#ffffff",viewBox:"0 0 36 36",preserveAspectRatio:"xMidYMid meet",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),{},{children:[(0,x.jsx)("title",{children:"play"}),(0,x.jsx)("path",{className:"clr-i-solid clr-i-solid-path-1",d:"M32.16,16.08,8.94,4.47A2.07,2.07,0,0,0,6,6.32V29.53a2.06,2.06,0,0,0,3,1.85L32.16,19.77a2.07,2.07,0,0,0,0-3.7Z"}),(0,x.jsx)("rect",{x:0,y:0,width:36,height:36,fillOpacity:0})]}))}},1542:function(e,n,t){t.d(n,{e:function(){return c}});var a=t(1413),r=t(3433),i=t(9439),o=t(77),s=t(2791),l=t(7799),c=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=(0,s.useState)(null),u=(0,i.Z)(c,2),d=u[0],f=u[1],p=(0,s.useState)(null),m=(0,i.Z)(p,2),g=m[0],h=m[1];return(0,s.useEffect)((function(){var i;i=t.length>0?(0,l.IO)((0,l.hJ)(o.d_,e),l.ar.apply(void 0,(0,r.Z)(n)),(0,l.Xo)("createdTime","desc")):(0,l.IO)((0,l.hJ)(o.d_,e),l.ar.apply(void 0,(0,r.Z)(n)));var s=(0,l.cf)(n?i:(0,l.hJ)(o.d_,e),(function(e){var n=[];e.docs.forEach((function(e){n.push((0,a.Z)((0,a.Z)({},e.data()),{},{id:e.id}))})),f(n),h(null)}),(function(e){h(e.message)}));return s}),[l.hJ]),{documents:d,error:g}}},8277:function(e,n,t){t.d(n,{C:function(){return g}});var a=t(4165),r=t(1413),i=t(5861),o=t(9439),s=t(2791),l=t(77),c=t(7799),u=t(276);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=new Date,i=r.getFullYear(),o=r.getMonth(),s=r.getDate(),l=r.getHours(),c=r.getMinutes(),u=r.getMilliseconds();return 0!==n&&r.setMonth(r.getMonth()+n),0!==t&&r.setDate(r.getDate()+t),0!==i&&r.setFullYear(r.getFullYear()+a),o=("0"+(1+r.getMonth())).slice(-2),s=("0"+r.getDate()).slice(-2),(i=r.getFullYear())+e+o+e+s+l+c+u}function f(e,n){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",t=arguments.length>2?arguments[2]:void 0,a=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),o=t.getHours(),s=t.getMinutes();1===(""+r).length&&(r="0"+r);1===(""+i).length&&(i="0"+i);1===(""+o).length&&(o="0"+o);1===(""+s).length&&(s="0"+s);return""+a+e+r+e+i+" "+o+n+s}(e,n,new Date)}var p={document:null,isPending:!1,error:null,success:!1},m=function(e,n){switch(n.type){case"isPending":return{isPending:!0,document:null,success:!1,error:null};case"addDoc":case"editDoc":case"deleteDoc":return{isPending:!1,document:n.payload,success:!0,error:null};case"error":return{isPending:!1,document:null,success:!1,error:n.payload};default:return e}},g=function(e){var n=(0,s.useReducer)(m,p),t=(0,o.Z)(n,2),g=t[0],h=t[1],v=(0,s.useState)([]),x=(0,o.Z)(v,2),y=(x[0],x[1],(0,c.hJ)(l.d_,e)),w=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n,t){var i,o,s,p,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=l.AB.fromDate(new Date),o=f("/",":"),s=d(),p=(0,u.iH)(l.tO,"images/"+t.name),m=(0,u.B0)(p,t),h({type:"isPending"});try{m.on("state_changed",(function(e){}),(function(e){console.error("\uc2e4\ud328 \uc0ac\uc720 --\x3e ",e)}),(function(){(0,u.Jt)(m.snapshot.ref).then((function(e){console.log("\uc5c5\ub85c\ub4dc \uacbd\ub85c --\x3e ",e);var t=(0,c.ET)(y,(0,r.Z)((0,r.Z)({},n),{},{createdTime:i,createdDate:o,createdUqe:s,downloadURL:e}));console.log(t),h({type:"addDoc",payload:t}),console.log("\uc800\uc7a5\uc644\ub8cc")}))}))}catch(a){h({type:"error",payload:a.message})}case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.AB.fromDate(new Date),i=f("/",":"),o=d(),h({type:"isPending"});try{s=(0,c.ET)(y,(0,r.Z)((0,r.Z)({},n),{},{createdTime:t,createdDate:i,createdUqe:o})),console.log(s),h({type:"addDoc",payload:s}),console.log("\uc800\uc7a5\uc644\ub8cc")}catch(a){h({type:"error",payload:a.message})}case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n,t){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h({type:"isPending"}),e.prev=1,e.next=4,(0,c.r7)((0,c.JU)(y,t),(0,r.Z)({},n));case 4:i=e.sent,h({type:"editDoc",payload:i}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h({type:"error",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n,t){return e.apply(this,arguments)}}(),D=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h({type:"isPending"}),e.prev=1,e.next=4,(0,c.oe)((0,c.JU)(y,n));case 4:t=e.sent,h({type:"deleteDoc",payload:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h({type:"error",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.AB.fromDate(new Date),i=f("/",":"),o=d(),h({type:"isPending"});try{s=(0,c.ET)(y,(0,r.Z)((0,r.Z)({},n),{},{createdTime:t,createdDate:i,createdUqe:o})),console.log(s),h({type:"addDoc",payload:s}),console.log("\uc800\uc7a5\uc644\ub8cc")}catch(a){h({type:"error",payload:a.message})}case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{addDocument:w,addComment:Z,editDocument:j,deleteDocument:D,addUser:N,response:g}}}}]);
//# sourceMappingURL=444.6544f149.chunk.js.map